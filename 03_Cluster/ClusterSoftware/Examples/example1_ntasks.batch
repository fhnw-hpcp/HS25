#!/bin/bash
#SBATCH --job-name=example1
#SBATCH --nodes=2
#SBATCH --ntasks=8
#SBATCH --ntasks-per-node=4
#SBATCH --mem-per-cpu=8G
#SBATCH --hint=nomultithread
#SBATCH --dependency=singleton
#SBATCH --time=00:05:00
#SBATCH --partition=hourly
#SBATCH --output=logs/%x.out
#SBATCH --error=logs/%x.out

echo -e "\n> Execute get_cpu/get_cpu"
srun get_cpu/get_cpu | sort -k6n

export SACCT_FORMAT="JobId%20,JobName%15,Partition%15,Account,State,ExitCode,AllocTRES%40,NodeList%20"

echo -e "\n> srun with warning"
srun -n 1 -c 1 echo "SACCT_FORMAT=$SACCT_FORMAT sacct -j $SLURM_JOBID"

echo -e "\n> srun with fixed -N"
srun -N 1 -n 1 -c 1 sacct -j $SLURM_JOBID
